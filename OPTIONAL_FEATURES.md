# Optional Features Documentation

## Overview

Advanced features that enhance productivity and data management, including local storage, templates, export options, and time tracking.

---

## 1. Local Storage Support ðŸ’¾

### StorageToggle Component

Enable/disable automatic saving to browser's localStorage.

**Features:**
- âœ… Toggle persistence on/off
- âœ… Auto-save when enabled
- âœ… Data persists across refreshes
- âœ… Warning before leaving if unsaved data

### How It Works

**When Enabled:**
- Report auto-saves to localStorage
- Data persists across browser sessions
- Survives page refreshes
- Automatic recovery on return

**When Disabled:**
- Data only in memory
- Warning before page unload if data exists
- Fresh start on each visit

### Usage

```typescript
const [persistenceEnabled, setPersistenceEnabled] = usePersistenceToggle();

<StorageToggle
  enabled={persistenceEnabled}
  onToggle={setPersistenceEnabled}
/>
```

### Browser Storage Keys

```
persistence-enabled  â†’ Toggle state
daily-report        â†’ Report data
report-templates    â†’ Saved templates
```

### Data Safety

**Before Unload Warning:**
- Shows if persistence disabled
- Only if report has tasks
- Prevents accidental data loss

**Storage Quota:**
- Browser limits: ~5-10MB
- Typical report: <100KB
- Can store 50-100 reports

---

## 2. Templates System ðŸ“‹

### TemplateManager Component

Save and load section configurations for quick setup.

**Features:**
- âœ… Save current structure
- âœ… Load saved templates
- âœ… Delete templates
- âœ… Shows template count

### How It Works

**Saving Templates:**
1. Configure your sections
2. Click "Save Template"
3. Enter template name
4. Structure saved (tasks excluded)

**Loading Templates:**
1. Click "Load Template"
2. Select from list
3. Sections loaded with structure
4. Fresh IDs generated

### Template Storage

**What's Saved:**
- Section names
- Section order
- Subsection structure
- Fixed/dynamic flags

**NOT Saved:**
- Task data
- Task links
- Comments
- Time entries

### Use Cases

**Common Templates:**
1. **Weekly Sprint**
   - Panel Valid Bugs
   - Testing
   - Live Bugs

2. **Bug Triage Day**
   - All bug categories
   - No testing section

3. **Testing Day**
   - Testing section
   - Live bugs
   - Internal bugs

### API

```typescript
interface Template {
  id: string;
  name: string;
  sections: Section[];
  createdAt: string;
}

<TemplateManager
  currentSections={report.sections}
  onLoadTemplate={handleLoadTemplate}
/>
```

---

## 3. Export Options ðŸ“¥

### ExportOptions Component

Download reports in different formats.

**Available Formats:**

#### Text File (.txt)
- Plain text format
- Same as copy/paste
- Universal compatibility
- Filename: `daily-report-YYYY-MM-DD.txt`

#### Markdown File (.md)
- Formatted markdown
- Includes headers
- GitHub-ready
- Filename: `daily-report-YYYY-MM-DD.md`

### How It Works

**Download Process:**
1. Click download button
2. Report generated
3. File created in browser
4. Auto-download starts

**File Format:**

**Text (.txt):**
```
Today's Update || 04-02-2026
[Internal Valid Bug] [4] >>> Total: 4.88 hours
    => https://... >> DONE >> 1hr 40min
...
```

**Markdown (.md):**
```markdown
# Daily Report - 2026-02-04

Today's Update || 04-02-2026
[Internal Valid Bug] [4] >>> Total: 4.88 hours
...

---
*Generated by Daily Report Generator*
```

### Use Cases

- **Share via email:** Attach .txt file
- **Documentation:** Use .md in repos
- **Archive:** Save daily reports
- **Backup:** Export before clearing

---

## 4. Time Tracking â±ï¸

### Quick Time Buttons

Fast time entry with preset values.

**Available Times:**
- 15min
- 30min
- 45min
- 1hr
- 1hr 30min
- 2hr

**Features:**
- One-click time entry
- Shows below time input
- Hover highlight
- Keyboard accessible

**Location:**
Appears under time input in each task row.

### TimeTracker Component

Running timer for current task.

**Features:**
- âœ… Start/Pause/Stop timer
- âœ… Real-time display (HH:MM:SS)
- âœ… Decimal hours shown
- âœ… Task description
- âœ… Log time to tasks

### How It Works

**Starting Timer:**
1. Enter task description (optional)
2. Click "Start"
3. Timer runs in real-time
4. Can pause/resume

**Logging Time:**
1. Click "Stop"
2. Time converted to format
3. Ready to add to task
4. Timer resets

**Display:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   01:23:45       â”‚  â† Real-time timer
â”‚   1.40h          â”‚  â† Decimal hours
â”‚                  â”‚
â”‚ Task: [____]     â”‚  â† Description
â”‚                  â”‚
â”‚ [Start] [Log]    â”‚  â† Controls
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Time Conversion

```
00:15:00 â†’ "15min"
00:45:00 â†’ "45min"
01:00:00 â†’ "1hr"
01:30:00 â†’ "1hr 30min"
02:15:00 â†’ "2hr 15min"
```

### Use Cases

**Track as you work:**
1. Start timer when beginning task
2. Pause for interruptions
3. Resume when back
4. Log when complete

**Time awareness:**
- See actual time spent
- Compare estimates vs actual
- Improve time estimation

---

## Component Details

### StorageToggle

**Props:**
```typescript
interface StorageToggleProps {
  enabled: boolean;
  onToggle: (enabled: boolean) => void;
}
```

**States:**
- Enabled: "Auto-save enabled"
- Disabled: "Auto-save disabled"

### TemplateManager

**Props:**
```typescript
interface TemplateManagerProps {
  currentSections: Section[];
  onLoadTemplate: (sections: Section[]) => void;
}
```

**Dialogs:**
- Save: Name input + save button
- Load: Template list + load/delete

### ExportOptions

**Props:**
```typescript
interface ExportOptionsProps {
  report: Report;
}
```

**Methods:**
- `handleDownloadTxt()` - Export as .txt
- `handleDownloadMd()` - Export as .md

### QuickTimeButtons

**Props:**
```typescript
interface QuickTimeButtonsProps {
  onSelectTime: (time: string) => void;
}
```

**Times:**
6 preset buttons (15min to 2hr)

### TimeTracker

**Props:**
```typescript
interface TimeTrackerProps {
  onTimeLogged: (time: string) => void;
}
```

**State:**
- isRunning: boolean
- elapsedSeconds: number
- taskDescription: string

---

## Hooks

### useLocalStorage

Custom hook for localStorage integration.

```typescript
const [value, setValue, clear] = useLocalStorage({
  key: "my-key",
  defaultValue: {},
  enabled: true,
});
```

**Features:**
- Auto-save on change
- JSON serialization
- Error handling
- SSR compatible

### usePersistenceToggle

Hook for persistence toggle state.

```typescript
const [enabled, setEnabled] = usePersistenceToggle();
```

**Saves to:**
`localStorage.getItem("persistence-enabled")`

### useHasStoredData

Check if data exists in localStorage.

```typescript
const hasData = useHasStoredData("daily-report");
```

**Returns:**
- `true` if data exists
- `false` if no data

---

## Integration

### Main Page Integration

```typescript
// Persistence
const [persistenceEnabled, setPersistenceEnabled] = usePersistenceToggle();

const [report, setReport] = useLocalStorage({
  key: "daily-report",
  defaultValue: createEmptyReport(new Date().toISOString().split("T")[0]),
  enabled: persistenceEnabled,
});

// Templates
const handleLoadTemplate = (sections: Section[]) => {
  setReport((prev) => ({ ...prev, sections }));
};

// Time tracking
const handleTimeLogged = (time: string) => {
  // Use logged time
};
```

### Sidebar Components

```tsx
<StorageToggle enabled={persistenceEnabled} onToggle={setPersistenceEnabled} />
<TimeTracker onTimeLogged={handleTimeLogged} />
<TemplateManager currentSections={report.sections} onLoadTemplate={handleLoadTemplate} />
<ExportOptions report={report} />
```

---

## Browser Compatibility

### LocalStorage

**Supported:**
- Chrome 4+
- Firefox 3.5+
- Safari 4+
- Edge (all versions)
- IE 8+

**Storage Limits:**
- Desktop: 5-10MB
- Mobile: 2.5-5MB
- Varies by browser

### File Downloads

**Supported:**
- Chrome 15+
- Firefox 20+
- Safari 10+
- Edge (all versions)

**Method:**
- Blob API
- createElement('a')
- Auto-download

---

## Data Management

### Storage Structure

```json
{
  "persistence-enabled": true,
  "daily-report": {
    "date": "2026-02-05",
    "sections": [...],
    "nextPlanDate": "2026-02-06",
    "nextPlanTasks": [...]
  },
  "report-templates": [
    {
      "id": "uuid",
      "name": "Weekly Sprint",
      "sections": [...],
      "createdAt": "2026-02-05T10:00:00Z"
    }
  ]
}
```

### Clear Data

**Manual:**
1. Disable persistence
2. Refresh page
3. Data cleared

**Programmatic:**
```javascript
localStorage.removeItem("daily-report");
localStorage.removeItem("report-templates");
```

### Export Before Clearing

**Recommended:**
1. Export as .txt or .md
2. Save to file system
3. Then clear data

---

## Performance

### Impact

**Bundle Size:**
- StorageToggle: ~1KB
- TemplateManager: ~2KB
- ExportOptions: ~1KB
- TimeTracker: ~2KB
- Hooks: ~1KB
- **Total: ~7KB**

**Runtime:**
- localStorage: <1ms
- Export: <10ms
- Templates: <5ms
- Timer: 1000ms interval

### Optimization

**LocalStorage:**
- Only saves when enabled
- Debounced writes (automatic)
- JSON compression possible

**Templates:**
- Lazy loading
- On-demand parsing
- Minimal storage

---

## Security

### Data Privacy

**LocalStorage:**
- Domain-specific
- Not sent to server
- Cleared when clearing browser data

**Export:**
- Client-side only
- No server upload
- User controls files

### Best Practices

1. **Don't store sensitive data**
2. **Export regularly for backup**
3. **Clear old templates**
4. **Use persistence wisely**

---

## Troubleshooting

### Storage Not Working

**Causes:**
- Private/incognito mode
- Storage quota exceeded
- Browser settings

**Solutions:**
1. Check browser mode
2. Clear old data
3. Check settings

### Templates Not Loading

**Causes:**
- Corrupted data
- Version mismatch

**Solutions:**
1. Clear templates
2. Re-save templates
3. Check console errors

### Export Not Downloading

**Causes:**
- Pop-up blocker
- Download settings

**Solutions:**
1. Allow downloads
2. Check browser settings
3. Try different browser

---

## Future Enhancements

Potential improvements:

1. **Cloud Sync**
   - Save to cloud storage
   - Cross-device sync
   - Team collaboration

2. **More Export Formats**
   - PDF export
   - CSV export
   - JSON export

3. **Advanced Templates**
   - Template categories
   - Share templates
   - Import templates

4. **Enhanced Time Tracking**
   - Time goals
   - Daily summary
   - Week totals
   - Charts/graphs

5. **Automation**
   - Auto-start timer
   - Pomodoro integration
   - Reminder notifications

---

## Summary

### Features Added

1. âœ… **LocalStorage** - Auto-save with toggle
2. âœ… **Templates** - Save/load structures
3. âœ… **Export** - Download as .txt or .md
4. âœ… **Quick Times** - Preset time buttons
5. âœ… **Timer** - Running time tracker

### Benefits

- **Productivity:** Quick time entry
- **Flexibility:** Save/load structures
- **Safety:** Auto-save protection
- **Portability:** Export to files
- **Accuracy:** Track actual time

---

All optional features are production-ready and fully integrated!
